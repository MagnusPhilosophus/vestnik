% Document packages
% -----------------

% Font and language packages
\usepackage{fontspec}                 % Kazakh and Russian fonts
\setmainfont{FreeSerif}
\setsansfont{FreeSans}
\setmonofont{FreeMono}
\usepackage{polyglossia}              % Multilingual support
\setmainlanguage{russian}
\setotherlanguages{english,kazakh}

% Hyperlink and color packages
\usepackage[hidelinks]{hyperref}      % Hyperlinks within the document
\usepackage{xcolor}                   % Color support

% Table packages
\usepackage{booktabs}                 % Enhanced table formatting
\usepackage{tabularx}                 % Enhanced table environments
\usepackage{longtable}                % Tables spanning multiple pages
\usepackage{multirow}                 % Multi-row cells in tables
\usepackage{makecell}                 % Additional table commands
\usepackage{chngcntr}                 % Customizing table and figure numbering

% Graphics packages
\usepackage{graphicx}                 % Including graphics in the document
%\usepackage{wrapfig}                  % Wrapping text around figures

% Mathematical packages
\usepackage{amsmath}                  % Additional math symbols and environments
\usepackage{amssymb}                  % Additional math symbols

% Code listing package
\usepackage{listings}                 % Code formatting and syntax highlighting
\lstset{
    language=C++,
    basicstyle=\ttfamily,
    keywordstyle=\color{blue}\ttfamily,
    stringstyle=\color{red}\ttfamily,
    commentstyle=\color{green}\ttfamily,
    morecomment=[l][\color{magenta}]{\#},
    numbers=left,
    numberstyle=\color{gray},
    breaklines=true,
    breakatwhitespace=true,
    tabsize=4
}

% Document settings
% ----------------

% Page layout package
\usepackage[margin=3cm]{geometry}     % Customizing page layout and margins

% Text formatting packages
\usepackage[normalem]{ulem}           % Underlining and emphasis styles
\usepackage{calc}                     % Mathematical calculations in LaTeX commands
\usepackage{soul}                     % Additional text formatting options
\usepackage{multicol}

% Additional packages
% -------------------

% Float and caption packages
\usepackage{float}                    % Enhanced placement of figures and tables
\usepackage{subcaption}               % Subfigures and subtables

% Links and URL package
\hypersetup{
    colorlinks=true,                   % Color links instead of boxes
    linkcolor=black,                    % Color of internal links
    urlcolor=blue!80!black               % Color of external links
}

% Graphics path
\graphicspath{{assets}}

% Colors
\definecolor{lightblue}{RGB}{0,116,180}

% Header packages
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\sectionmark}[1]{ \markright{#1}{} }
\renewcommand{\chaptermark}[1]{ \markboth{#1}{} }
\cfoot{\thepage}
\fancyhead[CE]{\small ҚазТБУ ХАБАРШЫСЫ - VESTNIK KazUTB - ВЕСТНИК КазУТБ № 2 (19) - 2023}
\fancyhead[CO]{\small \rightmark}
\renewcommand{\headrulewidth}{2pt}% 2pt header rule
\renewcommand{\headrule}{\hbox to\headwidth{%
  \color{lightblue}\leaders\hrule height \headrulewidth\hfill}}
\setlength{\headheight}{22pt}
\addtolength{\topmargin}{-10pt}
\renewcommand{\footrulewidth}{2pt}
\renewcommand{\footrule}{\hbox to\headwidth{%
  \color{lightblue}\leaders\hrule height \footrulewidth\hfill}}

\setlength{\parskip}{0.3em}
\setlength{\parindent}{1em}
\usepackage{enumitem}

% Decrease padding in itemize
\setlist[itemize]{itemsep=0pt, topsep=0pt, leftmargin=*}%, partopsep=0pt, parsep=0pt, leftmargin=0.5em}

% Decrease padding in enumerate
\setlist[enumerate]{itemsep=0pt, topsep=0pt, leftmargin=*}%, partopsep=0pt, parsep=0pt, leftmargin=0.5em}

\setlength\multicolsep{0pt}

% Section formatting package
\usepackage{sectsty}                  % Customizing section headings
\usepackage{titlesec}
\usepackage{tocloft}
\usepackage{titletoc}
% Redefine the format of the section title
\titleformat{\section}[block]{\centering\bfseries\large}{}{0pt}{}[]
\titleformat{\chapter}[display]{\centering\normalfont\large\bfseries}{}{3pt}{\large}
% Decrease the top margin for chapter titles
\titlespacing*{\chapter}{0pt}{-80pt}{20pt}

\makeatletter
\let\latexl@chapter\l@chapter
\def\l@chapter#1#2{\begingroup\let\numberline\@gobble\latexl@chapter{#1}{#2}\endgroup}
\makeatother

\makeatletter
\let\latexl@section\l@section
\def\l@section#1#2{\begingroup\let\numberline\@gobble\latexl@section{#1}{#2}\endgroup}
\makeatother

% Рис.1-
\usepackage{caption}
\renewcommand{\thefigure}{\arabic{figure}}
\DeclareCaptionLabelFormat{custom}{#1 #2}
\DeclareCaptionLabelSeparator{custom}{ - }
\captionsetup{labelformat=custom, labelsep=custom, justification=centering}

% Center table captions
\numberwithin{table}{section}
\renewcommand{\thetable}{\arabic{table}}
\captionsetup[table]{justification=centering}

\renewcommand{\theequation}{\arabic{equation}}
\addto\captionsrussian{\renewcommand{\contentsname}{\hfill\bfseries\Large МАЗМҰНЫ – СОДЕРЖАНИЕ – CONTENTS\hfill}}
\renewcommand{\cftaftertoctitle}{\hfill}
\titlecontents{chapter}
  [0pt]
  {\addvspace{1em}}
  {\bfseries\large\centering\hspace{1em}}
  {}
  {\hspace{1em}\titlerule*[0.5pc]{.}\contentspage}
\titlecontents{section}
  [0pt]
  {\addvspace{0.5em}}
  {}
  {}
  {\hspace{1em}\titlerule*[0.5pc]{.}\contentspage}

%% \newcommand{\sectionwithauthors}[2]{%
%%   \addtocontents{toc}{\protect\contentsline{section}{#1}{}{}}%
%%   \section{#2}%
%% }
\newcommand{\sectionwithauthors}[2]{%
  \addcontentsline{toc}{section}{#1 \\ #2}%
  \section*{#2}%
  \setcounter{figure}{0}
  \setcounter{table}{0}
}

\makeatletter
\renewcommand{\@dotsep}{10000}
\makeatother

\renewcommand{\cfttoctitlefont}{\vspace*{-5em}\Huge}
